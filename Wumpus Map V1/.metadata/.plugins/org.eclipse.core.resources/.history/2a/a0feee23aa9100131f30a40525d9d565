import java.awt.Point;

public class Main
{
	public static void main(String[] args)
	{
		Board gameBoard = new Board(10, 20, 0);
		gameBoard.player.board = gameBoard;
		
		GameObject currentGameObject;
		Player player = gameBoard.player;
		String input;
		
		boolean playing = true;
		while(playing)
		{
			printMap(gameBoard);
			
			System.out.println(player.getPlayerSenses(gameBoard.getPlayerTriggers()));
			
			input = EasyIn.getString();
			
			if(input.toLowerCase().equals("n"))
			{
				player.move(Actor.NORTH);
			}
			else if(input.toLowerCase().equals("s"))
			{
				player.move(Actor.SOUTH);
			}
			else if(input.toLowerCase().equals("e"))
			{
				player.move(Actor.EAST);
			}
			else if(input.toLowerCase().equals("w"))
			{
				player.move(Actor.WEST);
			}
			
			currentGameObject = gameBoard.getGameObjectFromHash(player.position);
			
			if(currentGameObject instanceof Pit)
			{
				System.out.println("You fell down a pit and died.");
				
				playing = false;
			}
			else if(currentGameObject instanceof Superbat)
			{
				System.out.println("A giant bat carried you off somewhere.");
				
				player.position = gameBoard.getRandomEmptyPoint(1);
			}
			
			if(player.position.equals(gameBoard.wumpus.position))
			{
				System.out.println("The Wumpus killed you.");
				
				playing = false;
			}
			else if(player.position.equals(gameBoard.treasure.position))
			{
				System.out.println("You picked up some phat l00t.");
				
				player.hasTreasure = true;
			}
			else if(player.position.equals(gameBoard.caveExit.position))
			{
				if(player.hasTreasure)
				{
					System.out.println("You escaped with the treasure!");
					
					playing = false;
				}
				else
				{
					System.out.println("You found the cave exit, but you cannot leave without the treasure.");
				}
			}
			
			if(currentGameObject instanceof Wumpus)
			{
				System.out.println("The Wumpus killed you.");
				
				playing = false;
			}
			else if(currentGameObject instanceof Treasure)
			{
				System.out.println("You picked up some phat l00t.");
				
				player.hasTreasure = true;
			}
			else if(currentGameObject instanceof CaveExit)
			{
				if(player.hasTreasure)
				{
					System.out.println("You escaped with the treasure!");
					
					playing = false;
				}
				else
				{
					System.out.println("You found the cave exit, but you cannot leave without the treasure.");
				}
			}
		}
	}
	
	public static void printMap(Board b)
	{
		Point tempPoint;
		GameObject tempObject;
		System.out.print(" ");
		for(int i = 0; i < b.gameObjects.size(); i ++)
		{
			for(int j = 0; j < b.gameObjects.get(i).size(); j ++)
			{
				tempPoint = new Point(j, i);
				
				if(b.player.position.equals(tempPoint))
				{
					System.out.print("P");
				}
				else if(b.wumpus.position.equals(tempPoint))
				{
					System.out.print("W");
				}
				else if(b.treasure.position.equals(tempPoint))
				{
					System.out.print("T");
				}
				else if(b.caveExit.position.equals(tempPoint))
				{
					System.out.print("E");
				}
				else
				{
					tempObject = b.getGameObjectFromHash(tempPoint);
					
					if(tempObject instanceof Empty)
					{
						System.out.print(" ");
					}
					else if(tempObject instanceof Pit)
					{
						System.out.print("O");
					}
					else if(tempObject instanceof Superbat)
					{
						System.out.print("B");
					}
				}
				
				System.out.print(" | ");
			}
			
			System.out.print("\n---------------------------------------\n");
		}
	}
}
